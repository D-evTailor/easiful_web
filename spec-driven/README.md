# Spec-Driven Development

This directory contains technical specifications for new features in **Easiful Web**.

## Structure

```
spec-driven/
â”œâ”€â”€ README.md                          # This file
â”œâ”€â”€ AI-AGENT-PROMPT-TEMPLATE.md        # Prompt templates for assigning implementations to agents
â”œâ”€â”€ SPEC-XXXX-001-feature-name/        # Example spec directory
â”‚   â”œâ”€â”€ SPEC.md                        # Main technical specification
â”‚   â”œâ”€â”€ AGENT_GUIDE.md                 # Step-by-step guide for AI agents
â”‚   â”œâ”€â”€ CONFIG_SOURCES.md              # Configuration sources and priorities
â”‚   â”œâ”€â”€ TESTS.md                       # Test cases (unit, integration, E2E)
â”‚   â”œâ”€â”€ IMPLEMENTATION.md              # Implementation log (generated by agents)
â”‚   â””â”€â”€ REVIEW.md                      # Review notes and approval
```

## Naming Convention

Spec directories include the **issue ID from the branch name** for traceability:

- **Format:** `SPEC-{ISSUE_ID}-{SEQ}-{kebab-name}`
- **ISSUE_ID:** 4-digit issue number from the branch (e.g. branch `42-stripe-improvements` â†’ `0042`)
- **SEQ:** 3-digit spec number within that issue (`001`, `002`, â€¦)
- **kebab-name:** Short descriptive name in kebab-case

**Example:** On branch `42-stripe-improvements`, the first spec is `SPEC-0042-001-checkout-retry` (not `SPEC-001-checkout-retry`).

## Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1. SPECIFICATION (Human or Senior AI)                          â”‚
â”‚     - Create directory SPEC-{issue}-XXX-name/                    â”‚
â”‚     - Write SPEC.md with full requirements                      â”‚
â”‚     - Write AGENT_GUIDE.md with step-by-step instructions       â”‚
â”‚     - Write TESTS.md with test cases                            â”‚
â”‚     - Write CONFIG_SOURCES.md if configuration is involved      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. IMPLEMENTATION (AI Agent)                                   â”‚
â”‚     - Read SPEC.md and AGENT_GUIDE.md in full                   â”‚
â”‚     - Check CONFIG_SOURCES.md for data sources                   â”‚
â”‚     - Implement following the defined phases                    â”‚
â”‚     - Document progress in IMPLEMENTATION.md                     â”‚
â”‚     - Run tests from TESTS.md                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3. REVIEW (Human or Senior AI)                                 â”‚
â”‚     - Review generated code                                     â”‚
â”‚     - Verify compliance with SPEC.md                            â”‚
â”‚     - Validate TESTS.md results                                 â”‚
â”‚     - Document in REVIEW.md                                     â”‚
â”‚     - Approve or request changes                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. MERGE (Developer)                                           â”‚
â”‚     - Confirm approval in REVIEW.md                              â”‚
â”‚     - Open PR with spec reference                               â”‚
â”‚     - Merge to main branch                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Conventions

### Naming
- Each feature has its own directory with prefix `SPEC-{issue}-XXX-name`
- Use the issue ID from the current branch (e.g. `0042` for `42-stripe-improvements`)
- Use sequential numbers within the issue: 001, 002, etc.
- Use descriptive kebab-case names: `checkout-retry`, `dashboard-analytics`

### Required Files
| File | Purpose |
|------|---------|
| `SPEC.md` | Complete technical specification |
| `AGENT_GUIDE.md` | Step-by-step implementation instructions |
| `TESTS.md` | Required test cases |
| `IMPLEMENTATION.md` | Progress log (updated by agents) |
| `REVIEW.md` | Review notes (updated by reviewer) |

### Optional Files
| File | Purpose |
|------|---------|
| `CONFIG_SOURCES.md` | Clarify configuration sources |
| `DIAGRAMS.md` | Additional diagrams |
| `CHANGELOG.md` | Spec change history |

### States
States are indicated with emojis:
- â¬œ Pending / Not started
- ğŸ”„ In progress
- âœ… Complete
- âŒ Rejected / Failed
- â¸ï¸ Paused / Blocked

## SPEC Status

| ID | Name | Status | Branch |
|----|------|--------|--------|
| â€” | â€” | â€” | â€” |

## CI Quality Gates

PRs are checked by `.github/workflows/firebase-deploy.yml`:

| Gate | Command | Purpose |
|------|---------|---------|
| Type check | `npx tsc --noEmit` | Catch TypeScript errors |
| Lint | `pnpm lint` | ESLint (next lint) |
| Unit tests | `pnpm test:unit` | Vitest unit tests |
| Build | `pnpm build` | Verify production build succeeds |

## Guide for AI Agents

### When Starting Implementation:
1. **READ** SPEC.md in full
2. **READ** AGENT_GUIDE.md for step-by-step instructions
3. **CHECK** CONFIG_SOURCES.md for correct data sources
4. **UPDATE** IMPLEMENTATION.md when starting each phase

### During Implementation:
- Follow the phase order defined in AGENT_GUIDE.md
- Update IMPLEMENTATION.md after each significant change
- Document any deviation from the spec with justification

### When Finishing:
- Run tests from TESTS.md and document results
- Complete the final checklist in IMPLEMENTATION.md
- Mark status as ğŸ”„ "Ready for Review"

## AI Agent Prompts

To assign an implementation to an AI agent, use the templates in **[AI-AGENT-PROMPT-TEMPLATE.md](./AI-AGENT-PROMPT-TEMPLATE.md)**:

| Template | Use |
|----------|-----|
| **Main Template** | New implementation, agent with no prior context |
| **Short Template** | Agent already familiar with the project |
| **Review Template** | Review a completed implementation |

### Quick Example

```
Implement @spec-driven/SPEC-0042-001-checkout-retry following the spec-driven methodology:

1. Read SPEC.md, AGENT_GUIDE.md, CONFIG_SOURCES.md, TESTS.md
2. Implement the phases in order
3. Update IMPLEMENTATION.md with your progress
4. Run tests and document results

Start now.
```

## Best Practices

1. **Clear specifications:** The spec should be detailed enough for an agent to implement without asking questions
2. **Decomposition:** Split large features into multiple small specs
3. **Tests first:** Define tests before implementing (TDD mindset)
4. **Centralized configuration:** Use CONFIG_SOURCES.md to avoid confusion with legacy files
5. **Versioning:** Keep spec change history if the spec is modified after implementation
